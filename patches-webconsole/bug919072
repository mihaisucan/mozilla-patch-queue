# HG changeset patch
# Parent 5424b3ef17eeaa2ca56e9989b6e3cbb86a434aaa
# User Mihai Sucan <mihai.sucan@gmail.com>
# Date 1389820166 -7200

Bug 919072 - Fix for intermittent TEST-UNEXPECTED-FAIL | browser_webconsole_bug_601352_scroll.js | scroll location is not at the top - Didn't expect 0, but got it; r=me

diff --git a/browser/devtools/webconsole/test/browser_webconsole_bug_601352_scroll.js b/browser/devtools/webconsole/test/browser_webconsole_bug_601352_scroll.js
--- a/browser/devtools/webconsole/test/browser_webconsole_bug_601352_scroll.js
+++ b/browser/devtools/webconsole/test/browser_webconsole_bug_601352_scroll.js
@@ -24,22 +24,22 @@ function consoleOpened(HUD) {
 
   for (let i = 0; i < 50; i++) {
     content.console.log("test message " + i);
   }
 
   HUD.jsterm.execute("1+1", performTest);
 
   function performTest(node) {
+    let rectNode = node.getBoundingClientRect();
+    let rectOutput = scrollNode.getBoundingClientRect();
+
     let scrollNode = HUD.outputNode.parentNode;
     isnot(scrollNode.scrollTop, 0, "scroll location is not at the top");
 
-    let rectNode = node.getBoundingClientRect();
-    let rectOutput = scrollNode.getBoundingClientRect();
-
     // Visible scroll viewport.
     let height = scrollNode.scrollHeight - scrollNode.scrollTop;
 
     // Top position of the last message node, relative to the outputNode.
     let top = rectNode.top + scrollNode.scrollTop;
     let bottom = top + node.clientHeight;
     info("output height " + height + " node top " + top + " node bottom " + bottom + " node height " + node.clientHeight);
 
