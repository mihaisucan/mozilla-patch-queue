# HG changeset patch
# Parent 1f15e7a5b82d7dd5ae150b0ad690016e69c65c6b
# Date 1371660114 -10800
Bug 880868 - Browser Console JS Error/Warning filtering doesn't seem to work; r=robcee

diff --git a/browser/devtools/webconsole/webconsole.js b/browser/devtools/webconsole/webconsole.js
--- a/browser/devtools/webconsole/webconsole.js
+++ b/browser/devtools/webconsole/webconsole.js
@@ -116,17 +116,17 @@ const SEVERITY_CLASS_FRAGMENTS = [
 // first by category (rows) and then by severity (columns).
 //
 // Most of these rather idiosyncratic names are historical and predate the
 // division of message type into "category" and "severity".
 const MESSAGE_PREFERENCE_KEYS = [
 //  Error         Warning   Info    Log
   [ "network",    null,         null,   "networkinfo", ],  // Network
   [ "csserror",   "cssparser",  null,   null,          ],  // CSS
-  [ "exception",  "jswarn",     null,   null,          ],  // JS
+  [ "exception",  "jswarn",     null,   "jslog",       ],  // JS
   [ "error",      "warn",       "info", "log",         ],  // Web Developer
   [ null,         null,         null,   null,          ],  // Input
   [ null,         null,         null,   null,          ],  // Output
   [ "secerror",   "secwarn",    null,   null,          ],  // Security
 ];
 
 // A mapping from the console API log event levels to the Web Console
 // severities.
@@ -521,16 +521,17 @@ WebConsoleFrame.prototype = {
   {
     this.filterPrefs = {
       network: Services.prefs.getBoolPref(FILTER_PREFS_PREFIX + "network"),
       networkinfo: Services.prefs.getBoolPref(FILTER_PREFS_PREFIX + "networkinfo"),
       csserror: Services.prefs.getBoolPref(FILTER_PREFS_PREFIX + "csserror"),
       cssparser: Services.prefs.getBoolPref(FILTER_PREFS_PREFIX + "cssparser"),
       exception: Services.prefs.getBoolPref(FILTER_PREFS_PREFIX + "exception"),
       jswarn: Services.prefs.getBoolPref(FILTER_PREFS_PREFIX + "jswarn"),
+      jslog: Services.prefs.getBoolPref(FILTER_PREFS_PREFIX + "jslog"),
       error: Services.prefs.getBoolPref(FILTER_PREFS_PREFIX + "error"),
       info: Services.prefs.getBoolPref(FILTER_PREFS_PREFIX + "info"),
       warn: Services.prefs.getBoolPref(FILTER_PREFS_PREFIX + "warn"),
       log: Services.prefs.getBoolPref(FILTER_PREFS_PREFIX + "log"),
       secerror: Services.prefs.getBoolPref(FILTER_PREFS_PREFIX + "secerror"),
       secwarn: Services.prefs.getBoolPref(FILTER_PREFS_PREFIX + "secwarn"),
     };
   },
diff --git a/browser/devtools/webconsole/webconsole.xul b/browser/devtools/webconsole/webconsole.xul
--- a/browser/devtools/webconsole/webconsole.xul
+++ b/browser/devtools/webconsole/webconsole.xul
@@ -107,16 +107,18 @@
                        tooltiptext="&btnPageJS.tooltip;"
                        accesskey="&btnPageJS.accesskey;"
                        tabindex="5">
           <menupopup>
             <menuitem label="&btnConsoleErrors;" type="checkbox"
                       autocheck="false" prefKey="exception"/>
             <menuitem label="&btnConsoleWarnings;" type="checkbox"
                       autocheck="false" prefKey="jswarn"/>
+            <menuitem label="&btnConsoleLog;" type="checkbox"
+                      autocheck="false" prefKey="jslog"/>
           </menupopup>
         </toolbarbutton>
         <toolbarbutton label="&btnPageSecurity.label;" type="menu-button"
                        category="security" class="devtools-toolbarbutton webconsole-filter-button"
                        tooltiptext="&btnPageSecurity.tooltip;"
                        accesskey="&btnPageSecurity.accesskey;"
                        tabindex="6">
           <menupopup>
